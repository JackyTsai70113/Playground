using playground.Helpers;

namespace playground.LeetCode._0000_0999;

public class _0924_MinMalwareSpread
{
    public static int MinMalwareSpread(int[][] graph, int[] initial)
    {
        int n = graph.Length;
        var ds = new DisjointSet(n);
        for (int i = 0; i < n; i++)
            for (int j = i + 1; j < n; j++)
                if (graph[i][j] == 1)
                    ds.Union(i, j);
        var infected = new int[n];
        foreach (var node in initial) infected[ds.Find(node)]++;
        var (count, res) = (0, initial.Min());
        foreach (var node in initial)
        {
            var group = ds.Find(node);
            if (infected[group] == 1)
            {
                if (ds.ranks[group] > count)
                    (count, res) = (ds.ranks[group], node);
                else if (ds.ranks[group] == count)
                    res = Math.Min(res, node);
            }
        }
        return res;
    }
}
